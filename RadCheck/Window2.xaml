<Window x:Class="RadCheck.Window2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
   
        xmlns:radcheck="clr-namespace:RadCheck"
        mc:Ignorable="d"
        Title="Window2" Height="450" Width="800">
    <!--xmlns:charting="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"-->
    <Window.Resources>
        <!-- 状态颜色转换器 -->
        <!--<radcheck:StatusToColorConverter x:Key="StatusToColorConverter"/>-->

        <!-- 探头数据样式 -->
        <Style x:Key="ProbeDataCardStyle" TargetType="Border">
            <Setter Property="Background" Value="#2C3E50"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#34495E"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="5" ShadowDepth="2" Opacity="0.3"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <!-- 标题栏 -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 标题区域 -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,10" Grid.Row="0">
            <TextBlock Text="放射性监测系统 V1.0" FontSize="20" FontWeight="Bold" VerticalAlignment="Center" Foreground="#2980B9"/>
            <Button Content="修改密码" Command="{Binding ChangePasswordCommand}" Margin="20,0,0,0" 
                    Background="#3498DB" Foreground="White" BorderThickness="0" Padding="8,3" 
                    Cursor="Hand" Height="30" VerticalAlignment="Center"/>
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="当前用户: admin" Margin="0,0,10,0"/>
                <Button Content="退出" Background="#E74C3C" Foreground="White" BorderThickness="0" 
                        Padding="8,3" Cursor="Hand" Height="30"/>
            </StackPanel>
        </StackPanel>

        <!-- 主内容区域 -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="200"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧主内容 -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- 上半部分：探头数据和趋势图 -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 探头数据显示 -->
                    <Grid Grid.Column="0" Margin="0,0,5,5">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="实时监测数据" FontSize="14" FontWeight="Bold" Margin="5,0" Grid.Row="0"/>

                        <UniformGrid Columns="3" Grid.Row="1">
                            <!-- 探头1 -->
                            <Border Style="{StaticResource ProbeDataCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="探头 1" Foreground="White" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding ProbeDataList[0].SerialNumber}" Foreground="#BDC3C7" FontSize="12" Margin="0,0,0,5"/>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding ProbeDataList[0].DoseRate, StringFormat={}{0:0.0000}}" 
                                                   Foreground="White" FontSize="18" FontWeight="Bold"/>
                                        <TextBlock Text=" mSV/H" Foreground="#BDC3C7" FontSize="12" Margin="5,2,0,0"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0" VerticalAlignment="Center">
                                        <Ellipse Width="10" Height="10"/>
                                        <TextBlock Text="{Binding ProbeDataList[0].Status}" Foreground="#BDC3C7" FontSize="12" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- 探头2 -->
                            <Border Style="{StaticResource ProbeDataCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="探头 2" Foreground="White" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding ProbeDataList[1].SerialNumber}" Foreground="#BDC3C7" FontSize="12" Margin="0,0,0,5"/>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding ProbeDataList[1].DoseRate, StringFormat={}{0:0.0000}}" 
                                                   Foreground="White" FontSize="18" FontWeight="Bold"/>
                                        <TextBlock Text=" mSV/H" Foreground="#BDC3C7" FontSize="12" Margin="5,2,0,0"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0" VerticalAlignment="Center">
                                        <Ellipse Width="10" Height="10"/>
                                        <TextBlock Text="{Binding ProbeDataList[1].Status}" Foreground="#BDC3C7" FontSize="12" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- 探头3 -->
                            <Border Style="{StaticResource ProbeDataCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="探头 3" Foreground="White" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding ProbeDataList[2].SerialNumber}" Foreground="#BDC3C7" FontSize="12" Margin="0,0,0,5"/>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding ProbeDataList[2].DoseRate, StringFormat={}{0:0.0000}}" 
                                                   Foreground="White" FontSize="18" FontWeight="Bold"/>
                                        <TextBlock Text=" mSV/H" Foreground="#BDC3C7" FontSize="12" Margin="5,2,0,0"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0" VerticalAlignment="Center">
                                        <Ellipse Width="10" Height="10"/>
                                        <TextBlock Text="{Binding ProbeDataList[2].Status}" Foreground="#BDC3C7" FontSize="12" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- 探头4 -->
                            <Border Style="{StaticResource ProbeDataCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="探头 4" Foreground="White" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding ProbeDataList[3].SerialNumber}" Foreground="#BDC3C7" FontSize="12" Margin="0,0,0,5"/>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding ProbeDataList[3].DoseRate, StringFormat={}{0:0.0000}}" 
                                                   Foreground="White" FontSize="18" FontWeight="Bold"/>
                                        <TextBlock Text=" mSV/H" Foreground="#BDC3C7" FontSize="12" Margin="5,2,0,0"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0" VerticalAlignment="Center">
                                        <Ellipse Width="10" Height="10" />
                                        <TextBlock Text="{Binding ProbeDataList[3].Status}" Foreground="#BDC3C7" FontSize="12" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- 探头5 -->
                            <Border Style="{StaticResource ProbeDataCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="探头 5" Foreground="White" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding ProbeDataList[4].SerialNumber}" Foreground="#BDC3C7" FontSize="12" Margin="0,0,0,5"/>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding ProbeDataList[4].DoseRate, StringFormat={}{0:0.0000}}" 
                                                   Foreground="White" FontSize="18" FontWeight="Bold"/>
                                        <TextBlock Text=" mSV/H" Foreground="#BDC3C7" FontSize="12" Margin="5,2,0,0"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0" VerticalAlignment="Center">
                                        <Ellipse Width="10" Height="10"/>
                                        <TextBlock Text="{Binding ProbeDataList[4].Status}" Foreground="#BDC3C7" FontSize="12" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- 探头6 -->
                            <Border Style="{StaticResource ProbeDataCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="探头 6" Foreground="White" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding ProbeDataList[5].SerialNumber}" Foreground="#BDC3C7" FontSize="12" Margin="0,0,0,5"/>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding ProbeDataList[5].DoseRate, StringFormat={}{0:0.0000}}" 
                                                   Foreground="White" FontSize="18" FontWeight="Bold"/>
                                        <TextBlock Text=" mSV/H" Foreground="#BDC3C7" FontSize="12" Margin="5,2,0,0"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0" VerticalAlignment="Center">
                                        <!--<Ellipse Width="10" Height="10" Fill="{Binding ProbeDataList[5].Status, Converter={StaticResource StatusToColorConverter}}"/>-->
                                        <TextBlock Text="{Binding ProbeDataList[5].Status}" Foreground="#BDC3C7" FontSize="12" Margin="5,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </UniformGrid>
                    </Grid>

                    <!-- 趋势图 -->
                    <Grid Grid.Column="1" Margin="5,0,0,5">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="5,0">
                            <TextBlock Text="剂量率趋势图" FontSize="14" FontWeight="Bold" VerticalAlignment="Center"/>
                            <ComboBox SelectedValue="{Binding SelectedProbeId}" Margin="10,0" Width="100">
                                <ComboBoxItem Tag="1" Content="探头 1"/>
                                <ComboBoxItem Tag="2" Content="探头 2"/>
                                <ComboBoxItem Tag="3" Content="探头 3"/>
                                <ComboBoxItem Tag="4" Content="探头 4"/>
                                <ComboBoxItem Tag="5" Content="探头 5"/>
                                <ComboBoxItem Tag="6" Content="探头 6"/>
                            </ComboBox>
                        </StackPanel>

                        <!--<charting:Chart Grid.Row="1" Background="#ECF0F1" Margin="5">
                            <charting:LineSeries 
                                Title="剂量率 (mSV/H)"
                                ItemsSource="{Binding HistoricalDataList}"
                                DependentValuePath="DoseRate"
                                IndependentValuePath="RecordTime"
                                IsSelectionEnabled="True">
                            </charting:LineSeries>
                            <charting:Chart.Axes>
                                <charting:DateTimeAxis Orientation="X" Title="时间"/>
                                <charting:LinearAxis Orientation="Y" Title="剂量率 (mSV/H)"/>
                            </charting:Chart.Axes>
                        </charting:Chart>-->
                    </Grid>
                </Grid>

                <!-- 下半部分：数据录入和数据状态 -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 数据录入 -->
                    <Border BorderBrush="#BDC3C7" BorderThickness="1" CornerRadius="5" Margin="0,5,5,0">
                        <StackPanel Margin="10">
                            <TextBlock Text="测量信息录入" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="桶号:" Grid.Row="0" Grid.Column="0" Margin="0,5" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CurrentMeasurementRecord.BucketNumber}" Grid.Row="0" Grid.Column="1" Margin="0,5" Height="25"/>

                                <TextBlock Text="日期:" Grid.Row="0" Grid.Column="2" Margin="0,5" VerticalAlignment="Center"/>
                                <DatePicker SelectedDate="{Binding CurrentMeasurementRecord.MeasureDate}" Grid.Row="0" Grid.Column="3" Margin="0,5" Height="25"/>

                                <TextBlock Text="测量人:" Grid.Row="1" Grid.Column="0" Margin="0,5" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CurrentMeasurementRecord.Measurer}" Grid.Row="1" Grid.Column="1" Margin="0,5" Height="25"/>

                                <TextBlock Text="备注:" Grid.Row="2" Grid.Column="0" Margin="0,5" VerticalAlignment="Top"/>
                                <TextBox Text="{Binding CurrentMeasurementRecord.Remarks}" Grid.Row="2" Grid.Column="1" 
                                         Grid.ColumnSpan="3" Margin="0,5" Height="60" AcceptsReturn="True" TextWrapping="Wrap"/>

                                <Button Content="保存记录" Command="{Binding SaveMeasurementRecordCommand}" 
                                        Grid.Row="3" Grid.Column="3" Margin="0,10" 
                                        HorizontalAlignment="Right" Width="100" Height="30"
                                        Background="#27AE60" Foreground="White" BorderThickness="0"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- 数据上传状态 -->
                    <Border BorderBrush="#BDC3C7" BorderThickness="1" CornerRadius="5" Margin="5,5,0,0">
                        <StackPanel Margin="10">
                            <TextBlock Text="数据上传状态" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="数据上传频率:" Grid.Row="0" Grid.Column="0" Margin="0,5" VerticalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="1" Margin="0,5">
                                    <Slider Minimum="1" Maximum="60" Value="{Binding UpdateInterval}" Width="200"/>
                                    <TextBlock Text="{Binding UpdateInterval}" Margin="10,0" Width="30" TextAlignment="Center"/>
                                    <TextBlock Text="秒" VerticalAlignment="Center"/>
                                </StackPanel>

                                <TextBlock Text="仪器序列号:" Grid.Row="1" Grid.Column="0" Margin="0,5" VerticalAlignment="Center"/>
                                <TextBlock Text="RM-2023-001" Grid.Row="1" Grid.Column="1" Margin="0,5" VerticalAlignment="Center"/>

                                <TextBlock Text="上次上传时间:" Grid.Row="2" Grid.Column="0" Margin="0,5" VerticalAlignment="Center"/>
                                <TextBlock Text="2023-06-15 14:30:25" Grid.Row="2" Grid.Column="1" Margin="0,5" VerticalAlignment="Center"/>

                                <TextBlock Text="实时上传状态:" Grid.Row="3" Grid.Column="0" Margin="0,5" VerticalAlignment="Center"/>
                                <StackPanel Orientation="Horizontal" Grid.Row="3" Grid.Column="1" Margin="0,5" VerticalAlignment="Center">
                                    <Ellipse Width="10" Height="10" Fill="Green"/>
                                    <TextBlock Text="正常" Margin="5,0" Foreground="Green"/>
                                </StackPanel>

                                <StackPanel Grid.Row="4" Grid.ColumnSpan="2" Margin="0,20,0,0" HorizontalAlignment="Center">
                                    <Button Content="数据查询" Command="{Binding QueryDataCommand}" 
                                            Width="120" Height="35" Margin="5"
                                            Background="#3498DB" Foreground="White" BorderThickness="0"/>
                                    <Button Content="导出数据" Command="{Binding ExportDataCommand}" 
                                            Width="120" Height="35" Margin="5"
                                            Background="#9B59B6" Foreground="White" BorderThickness="0"/>
                                    <Button Content="打印数据" Command="{Binding PrintDataCommand}" 
                                            Width="120" Height="35" Margin="5"
                                            Background="#F39C12" Foreground="White" BorderThickness="0"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>

            <!-- 右侧功能按钮 -->
            <StackPanel Grid.Column="1" Margin="5,0">
                <Button Content="实时监测" Height="50" FontSize="14" Margin="0,0,0,10"
                        Background="#3498DB" Foreground="White" BorderThickness="0"/>
                <Button Content="数据管理" Height="50" FontSize="14" Margin="0,0,0,10"
                        Background="#2980B9" Foreground="White" BorderThickness="0"/>
                <Button Content="数据查询" Height="50" FontSize="14" Margin="0,0,0,10"
                        Background="#2980B9" Foreground="White" BorderThickness="0"/>
                <Button Content="系统设置" Height="50" FontSize="14" Margin="0,0,0,10"
                        Background="#2980B9" Foreground="White" BorderThickness="0"/>
                <Button Content="关于系统" Height="50" FontSize="14" Margin="0,0,0,10"
                        Background="#2980B9" Foreground="White" BorderThickness="0"/>

                <StackPanel Margin="0,20,0,0">
                    <TextBlock Text="系统状态" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                    <TextBlock Text="运行时间: 120小时" Margin="0,5"/>
                    <TextBlock Text="连接探头: 6个" Margin="0,5"/>
                    <TextBlock Text="数据点: 12,548" Margin="0,5"/>
                    <TextBlock Text="系统版本: V1.0" Margin="0,5"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Grid>
</Window>